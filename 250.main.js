"use strict";(this.webpackJsonp_MyAppLibrary=this.webpackJsonp_MyAppLibrary||[]).push([[250],{41250:(n,e,a)=>{a.r(e),a.d(e,{CapacitorBarcodeScannerWeb:()=>r});var c=a(29895),o=a(54580),t=a(40090);class r extends c.Uw{async stopAndHideScanner(){console.log(window.OSBarcodeWebScanner),window.OSBarcodeWebScanner&&(await window.OSBarcodeWebScanner.stop(),window.OSBarcodeWebScanner=null),document.getElementById("cap-os-barcode-scanner-container-dialog").style.display="none"}buildScannerElement(){if(document.getElementById("cap-os-barcode-scanner-container"))return void(document.getElementById("cap-os-barcode-scanner-container").className="scanner-container-display");const n=document.body.appendChild(document.createElement("div"));n.id="cap-os-barcode-scanner-container";const e=document.createElement("div");e.id="cap-os-barcode-scanner-container-dialog",e.className="scanner-dialog";const a=document.createElement("div");a.className="scanner-dialog-inner";const c=document.createElement("span");c.className="close-button",c.innerHTML="&times;",a.appendChild(c);const o=document.createElement("p");o.innerHTML="&nbsp;",a.appendChild(o);const t=document.createElement("div");t.className="scanner-container-full-width",t.id="cap-os-barcode-scanner-container-scanner",a.appendChild(t),e.appendChild(a),n.appendChild(e),c.onclick=this.stopAndHideScanner}async scanBarcode(n){return this.buildScannerElement(),document.getElementById("cap-os-barcode-scanner-container-dialog").style.display="block",new Promise(((e,a)=>{var c,r;const i={facingMode:1===n.cameraDirection?"environment":"user",hasScannerButton:!1,scanButton:void 0!==n.scanButton&&n.scanButton,showScanLine:!1,scanInstructions:n.scanInstructions?n.scanInstructions:"",orientation:n.scanOrientation?n.scanOrientation:t.V7.PORTRAIT,showCameraSelection:!!(null===(c=n.web)||void 0===c?void 0:c.showCameraSelection)&&n.web.showCameraSelection,typeHint:17===n.hint?void 0:n.hint,scannerFPS:(null===(r=n.web)||void 0===r?void 0:r.scannerFPS)?n.web.scannerFPS:50},s=document.getElementById("cap-os-barcode-scanner-container-scanner");if(!s)throw new Error("Scanner Element is required for web");window.OSBarcodeWebScanner=new o.t2(s.id);const d={fps:i.scannerFPS,qrbox:s.getBoundingClientRect().width*(9/16)-10,aspectRatio:16/9,videoConstraints:{focusMode:"continuous",height:{min:576,ideal:1920},deviceId:void 0,facingMode:void 0}};window.OSBarcodeWebScanner.start({facingMode:i.facingMode},d,((n,a)=>{this.stopAndHideScanner(),e({ScanResult:n})}),(n=>{-1===n.indexOf("NotFoundException")&&(this.stopAndHideScanner(),console.error(`[Scanner Web Error] ${n}`),a(n))}))}))}}}}]);